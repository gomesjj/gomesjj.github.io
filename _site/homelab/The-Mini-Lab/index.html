<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.11.2 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>            The Mini Lab - DEV      TTY      </title>
<meta name="description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_UK">
<meta property="og:site_name" content="DEV | TTY">
<meta property="og:title" content="The Mini Lab">
<meta property="og:url" content="http://localhost:4000/homelab/The-Mini-Lab/">


  <meta property="og:description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">



  <meta property="og:image" content="http://localhost:4000/mini_lab_small.png">



  <meta name="twitter:site" content="@devttyuk">
  <meta name="twitter:title" content="The Mini Lab">
  <meta name="twitter:description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">
  <meta name="twitter:url" content="http://localhost:4000/homelab/The-Mini-Lab/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="http://localhost:4000/mini_lab_small.png">
    
  

  



  <meta property="article:published_time" content="2016-11-25T00:00:00+00:00">





  

  


<link rel="canonical" href="http://localhost:4000/homelab/The-Mini-Lab/">





  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000",
      "logo": "http://localhost:4000/images/cat_tty_sm.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Jose Gomes",
      "url": "http://localhost:4000",
      "sameAs": ["https://twitter.com/devttyuk","https://www.linkedin.com/in/jjgomes","https://github.com/gomesjj"]
    }
  </script>




  <meta name="msvalidate.01" content="426C494E4ED223A19760E7EA3829FC1A">


  <meta name="alexaVerifyID" content="yvVjIPUlqkOeQBGvpxEw95Xu2yg">



<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="DEV | TTY Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/">DEV | TTY</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/year-archive/" >Posts</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/categories/" >Categories</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/tags/" >Tags</a>
            </li>
          
            
            <li class="masthead__menu-item">
              <a href="http://localhost:4000/about/" >About</a>
            </li>
          
        </ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="/homelab" itemprop="item"><span itemprop="name">Homelab</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">The Mini Lab</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/images/bio-photo.png" alt="Jose Gomes" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Jose Gomes</h3>
    
    
      <p class="author__bio" itemprop="description">
        ... is just another techie.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">United Kingdom</span>
        </li>
      

      

      

      

      
        <li>
          <a href="https://twitter.com/devttyuk" itemprop="sameAs">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/jjgomes" itemprop="sameAs">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/gomesjj" itemprop="sameAs">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="The Mini Lab">
    <meta itemprop="description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">
    <meta itemprop="datePublished" content="November 25, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">The Mini Lab
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#burning-the-money-dont-tell-the-wife" id="markdown-toc-burning-the-money-dont-tell-the-wife">Burning the money (don’t tell the wife)</a></li>
  <li><a href="#lets-get-physical" id="markdown-toc-lets-get-physical">Let’s get physical</a>    <ul>
      <li><a href="#drn-domestic-routed-network" id="markdown-toc-drn-domestic-routed-network">DRN (Domestic Routed Network)</a></li>
      <li><a href="#mini-lab-vlans-10-20-and-30" id="markdown-toc-mini-lab-vlans-10-20-and-30">Mini Lab (VLANs 10, 20 and 30)</a></li>
      <li><a href="#dr-lab-streched-vlans-10-20-and-30" id="markdown-toc-dr-lab-streched-vlans-10-20-and-30">DR Lab (Streched VLANs 10, 20 and 30)</a></li>
    </ul>
  </li>
  <li><a href="#the-chief-architect-says" id="markdown-toc-the-chief-architect-says">The Chief Architect says:</a></li>
</ul>

  </nav>
</aside>

<h2 id="burning-the-money-dont-tell-the-wife">Burning the money (don’t tell the wife)</h2>

<p>I wrote about my old set-up in this <a href="/homelab/The-Home-Lab/">post</a> and then again about the future state of my Home Lab <a href="/homelab/Intel-NUC-to-the-rescue/">here</a>, when I mentioned my intention of doing something to placate the <abbr title="Good Lady Wife">GLW</abbr>. See, my electricity bill was going well past £4k a year…</p>

<p>Anyway, at the time of writing the second article (April 2016) I had one <a href="http://ark.intel.com/products/74483/Intel-NUC-Kit-DC53427HYE">DC53427HYEA</a> (my physical AD controller), so I decided to buy another two NUCs, but this time the <a href="http://www.intel.co.uk/content/www/uk/en/nuc/nuc-kit-nuc5i5ryh.html">NUC5i5RYH</a>. A few weeks later I bought yet another NUC5i5RYH, so I could play with vSAN too…</p>

<p>For the NAS, I had settled on building something around the <a href="http://www.asrockrack.com/general/productdetail.asp?Model=C2750D4I#Specifications">ASRock C2750D41</a>, but shortly after, I also bought a <a href="https://www.supermicro.com/products/motherboard/ATOM/X10/A1SAi-2750F.cfm">Supermicro A1SAi-2750F</a>.</p>

<p>You would have thought that that was enough by now, and any sane person would agree, but not me! The ASRock board was going to be the foundation for my FreeNAS build (what with 12 SATA ports and all), but, six of the SATA ports are controlled by Marvell chipsets and they simply suck. Instead, I used the Supermicro board for my NAS with a cheap Dell PERC H200 HBA flashed to IT mode, and finally crossflashed with the LSI 9211i8i firmware. But then I had an idea – Hey, what about resilience for the data? – so another A1SAi-2750F lightened my wallet further…</p>

<h2 id="lets-get-physical">Let’s get physical</h2>

<p>The network infrastructure remains the same: a Cisco SG200-18 with an etherchannel link via OM2 fibre link to an SG300-10 (on layer 3 mode). Access to the networks beyond (Internet) goes trough a Cisco rv320 router. It might change soon, but that is for another post…</p>

<p>There are five VLANs routed by the SG300-10 switch:</p>

<table>
  <thead>
    <tr>
      <th>VLAN ID</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>DRN</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Management</td>
    </tr>
    <tr>
      <td>20</td>
      <td>vSAN</td>
    </tr>
    <tr>
      <td>30</td>
      <td>vMotion</td>
    </tr>
    <tr>
      <td>40</td>
      <td>Guest Wi-Fi</td>
    </tr>
  </tbody>
</table>

<h3 id="drn-domestic-routed-network">DRN (Domestic Routed Network)</h3>

<p>That is where all the home gear (laptops, desktops, home wifi, etc.) sits.</p>

<ul>
  <li>Cisco SG300-10</li>
  <li>DC Controller
    <ul>
      <li>Intel DC53427HYE</li>
      <li>8GB RAM</li>
    </ul>
  </li>
</ul>

<h3 id="mini-lab-vlans-10-20-and-30">Mini Lab (VLANs 10, 20 and 30)</h3>

<ul>
  <li>Cisco SG200-18</li>
  <li>NAS
    <ul>
      <li>Lian Li PC-Q25B case</li>
      <li>Supermicro A1SAi-2750F</li>
      <li>32GB RAM</li>
      <li>6 x SATA 4TB drives</li>
    </ul>
  </li>
  <li>vSAN Cluster (3 nodes)
    <ul>
      <li>Intel NUC5i5RYH</li>
      <li>32GB RAM</li>
      <li>1 x 128GB M.2 SATA drive</li>
      <li>1 x 250GB SATA SSD drive</li>
      <li>2 x USB 3.0 Ethernet adapters</li>
    </ul>
  </li>
  <li>Nested ESXi Host
    <ul>
      <li>Streacom F7CWS ALPHA Black case</li>
      <li>64GB RAM</li>
      <li>2 x 250GB SATA SSD drives</li>
      <li>1 x 1TB SATA drive</li>
    </ul>
  </li>
</ul>

<h3 id="dr-lab-streched-vlans-10-20-and-30">DR Lab (Streched VLANs 10, 20 and 30)</h3>

<ul>
  <li>Cisco SG200-18</li>
</ul>

<p>Still being built. I am thinking about getting an SG-500 switch to replace the SG-300-10. The DR lab would then go to the bottom of the garden. ;-)</p>

<p>At the moment, just a second NAS with the same specification as that of the mini lab. Data replicated via ZFS send/receive.</p>

<p><strong>Note:</strong> The NUCs are now housed on my Lego NUC Rack. I will be writing another post with instructions on how to build a rack just like that soon (maybe!).</p>

<p><img src="/images/rack/rack_final_no_door_sm.png" alt="Lego NUCRack" class="align-center" /></p>

<h2 id="the-chief-architect-says">The Chief Architect says:</h2>

<p><img src="/images/chief_architect.png" alt="Chief Architect" class="align-center" /></p>

<center>A reasonable effort, but could do better.</center>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-11-25T00:00:00+00:00">November 25, 2016</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=devttyuk&text=The+Mini+Lab%20http%3A%2F%2Flocalhost%3A4000%2Fhomelab%2FThe-Mini-Lab%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fhomelab%2FThe-Mini-Lab%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http%3A%2F%2Flocalhost%3A4000%2Fhomelab%2FThe-Mini-Lab%2F" class="btn btn--google-plus" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Google Plus"><i class="fab fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Fhomelab%2FThe-Mini-Lab%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/homelab/USB-Ethernet-driver-for-ESXi-6.5/" class="pagination--pager" title="USB Ethernet driver for ESXi 6.5
">Previous</a>
    
    
      <a href="/homelab/How-I-Built-a-Lego-Rack-for-the-Intel-NUCs/" class="pagination--pager" title="How I built a Lego Rack for the Intel NUCs
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/kitchen_teaser.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/homelab/How-I-Built-a-Lego-Rack-for-the-Intel-NUCs/" rel="permalink">How I built a Lego Rack for the Intel NUCs
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  11 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Building a Lego Rack for the Intel NUCs, including a working front door. Lots of sweat, tears and last minute purchases from eBay…
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/usb_adapters_65.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/homelab/USB-Ethernet-driver-for-ESXi-6.5/" rel="permalink">USB Ethernet driver for ESXi 6.5
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">ESXi 6.5 drivers for USB 3.0 Gigabit Ethernet adapters based on the ASIX ax88179_178a or the Realtek RLT8153/RTL8152 chipsets
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/usb_adapters.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/homelab/Want-a-USB-Ethernet-driver-for-ESXi-You-can-have-two/" rel="permalink">Want a USB Ethernet driver for ESXi? You can have two.
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  11 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">ESXi drivers for USB 3.0 Gigabit Ethernet adapters based on the ASIX ax88179_178a or the Realtek RLT8153/RTL8152 chipsets
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "/commander.png"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/apple/Intel_Mesh_Commander_on_Mac_OS_X/" rel="permalink">Intel Mesh Commander on Mac OS X
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">A Mac OS X application for the management of computers with Intel AMT (Active Management Technology), supporting redirection, remote desktop, remote terminal...</p>
  </article>
</div>
        
      </div>
    </div>
  
  
</div>
    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/devttyuk"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="https://github.com/gomesjj"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Jose Gomes. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>







    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/homelab/The-Mini-Lab/";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/homelab/The-Mini-Lab"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://devttyuk.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  



  </body>
</html>