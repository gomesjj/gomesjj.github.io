

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>            The Mini Lab - DEV      TTY      </title>







<meta property="og:locale" content="en-UK">
<meta property="og:site_name" content="DEV | TTY">
<meta property="og:title" content="The Mini Lab">


  <link rel="canonical" href="http://localhost:4000/homelab/The-Mini-Lab/">
  <meta property="og:url" content="http://localhost:4000/homelab/The-Mini-Lab/">



  <meta property="og:description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">



  <meta name="twitter:site" content="@devttyuk">
  <meta name="twitter:title" content="The Mini Lab">
  <meta name="twitter:description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">
  <meta name="twitter:url" content="http://localhost:4000/homelab/The-Mini-Lab/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="http://localhost:4000/images/cat_tty_sm.png">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-11-25T00:00:00+00:00">
  
  
    <link rel="prev" href="http://localhost:4000/homelab/USB-Ethernet-driver-for-ESXi-6.5/" title="USB Ethernet driver for ESXi 6.5">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://localhost:4000",
      "logo": "http://localhost:4000/images/cat_tty_sm.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "person",
      "name" : "Jose Gomes",
      "url" : "http://localhost:4000",
      "sameAs" : ["https://twitter.com/devttyuk","https://www.linkedin.com/in/jjgomes","https://github.com/gomesjj"]
    }
  </script>




  <meta name="msvalidate.01" content="426C494E4ED223A19760E7EA3829FC1A">



<!-- end SEO -->


<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="DEV | TTY Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/">DEV | TTY</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/year-archive/">Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/categories/">Categories</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/tags/">Tags</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/about/">About</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    




  
    





<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="http://localhost:4000/categories/#homelab" itemprop="item"><span itemprop="name">Homelab</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">The Mini Lab</li>
      
    
  </ol>
</nav>
  


<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="http://localhost:4000/images/bio-photo.png" class="author__avatar" alt="Jose Gomes">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Jose Gomes</h3>
    <p class="author__bio">... is just another techie.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> United Kingdom</li>
      
      
      
      
      
        <li><a href="http://twitter.com/devttyuk"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
        <li><a href="http://linkedin.com/in/jjgomes"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
      
      
      
      
      
        <li><a href="http://github.com/gomesjj"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="The Mini Lab">
    <meta itemprop="description" content="The evolution of the home lab: Intel Avoton, Intel NUC, FreeNAS, ESXi and FreeNAS">
    <meta itemprop="datePublished" content="November 25, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">The Mini Lab
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  2 minutes read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-file-text"></i> Contents</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#burning-the-money-dont-tell-the-wife" id="markdown-toc-burning-the-money-dont-tell-the-wife">Burning the money (don’t tell the wife)</a></li>
  <li><a href="#lets-get-physical" id="markdown-toc-lets-get-physical">Let’s get physical</a>    <ul>
      <li><a href="#drn-domestic-routed-network" id="markdown-toc-drn-domestic-routed-network">DRN (Domestic Routed Network)</a></li>
      <li><a href="#mini-lab-vlans-10-20-and-30" id="markdown-toc-mini-lab-vlans-10-20-and-30">Mini Lab (VLANs 10, 20 and 30)</a></li>
      <li><a href="#dr-lab-streched-vlans-10-20-and-30" id="markdown-toc-dr-lab-streched-vlans-10-20-and-30">DR Lab (Streched VLANs 10, 20 and 30)</a></li>
    </ul>
  </li>
  <li><a href="#the-chief-architect-says" id="markdown-toc-the-chief-architect-says">The Chief Architect says:</a></li>
</ul>

  </nav>
</aside>

<h2 id="burning-the-money-dont-tell-the-wife">Burning the money (don’t tell the wife)</h2>

<p>I wrote about my old set-up in this <a href="/homelab/The-Home-Lab/">post</a> and then again about the future state of my Home Lab <a href="/homelab/Intel-NUC-to-the-rescue/">here</a>, when I mentioned my intention of doing something to placate the <abbr title="Good Lady Wife">GLW</abbr>. See, my electricity bill was going well past £4k a year…</p>

<p>Anyway, at the time of writing the second article (April 2016) I had one <a href="http://ark.intel.com/products/74483/Intel-NUC-Kit-DC53427HYE">DC53427HYEA</a> (my physical AD controller), so I decided to buy another two NUCs, but this time the <a href="http://www.intel.co.uk/content/www/uk/en/nuc/nuc-kit-nuc5i5ryh.html">NUC5i5RYH</a>. A few weeks later I bought yet another NUC5i5RYH, so I could play with vSAN too…</p>

<p>For the NAS, I had settled on building something around the <a href="http://www.asrockrack.com/general/productdetail.asp?Model=C2750D4I#Specifications">ASRock C2750D41</a>, but shortly after, I also bought a <a href="https://www.supermicro.com/products/motherboard/ATOM/X10/A1SAi-2750F.cfm">Supermicro A1SAi-2750F</a>.</p>

<p>You would have thought that that was enough by now, and any sane person would agree, but not me! The ASRock board was going to be the foundation for my FreeNAS build (what with 12 SATA ports and all), but, six of the SATA ports are controlled by Marvell chipsets and they simply suck. Instead, I used the Supermicro board for my NAS with a cheap Dell PERC H200 HBA flashed to IT mode, and finally crossflashed with the LSI 9211i8i firmware. But then I had an idea – Hey, what about resilience for the data? – so another A1SAi-2750F lightened my wallet further…</p>

<h2 id="lets-get-physical">Let’s get physical</h2>

<p>The network infrastructure remains the same: a Cisco SG200-18 with an etherchannel link via OM2 fibre link to an SG300-10 (on layer 3 mode). Access to the networks beyond (Internet) goes trough a Cisco rv320 router. It might change soon, but that is for another post…</p>

<p>There are five VLANs routed by the SG300-10 switch:</p>

<table>
  <thead>
    <tr>
      <th>VLAN ID</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>DRN</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Management</td>
    </tr>
    <tr>
      <td>20</td>
      <td>vSAN</td>
    </tr>
    <tr>
      <td>30</td>
      <td>vMotion</td>
    </tr>
    <tr>
      <td>40</td>
      <td>Guest Wi-Fi</td>
    </tr>
  </tbody>
</table>

<h3 id="drn-domestic-routed-network">DRN (Domestic Routed Network)</h3>

<p>That is where all the home gear (laptops, desktops, home wifi, etc.) sits.</p>

<ul>
  <li>Cisco SG300-10</li>
  <li>DC Controller
    <ul>
      <li>Intel DC53427HYE</li>
      <li>8GB RAM</li>
    </ul>
  </li>
</ul>

<h3 id="mini-lab-vlans-10-20-and-30">Mini Lab (VLANs 10, 20 and 30)</h3>

<ul>
  <li>Cisco SG200-18</li>
  <li>NAS
    <ul>
      <li>Lian Li PC-Q25B case</li>
      <li>Supermicro A1SAi-2750F</li>
      <li>32GB RAM</li>
      <li>6 x SATA 4TB drives</li>
    </ul>
  </li>
  <li>vSAN Cluster (3 nodes)
    <ul>
      <li>Intel NUC5i5RYH</li>
      <li>32GB RAM</li>
      <li>1 x 128GB M.2 SATA drive</li>
      <li>1 x 250GB SATA SSD drive</li>
      <li>2 x USB 3.0 Ethernet adapters</li>
    </ul>
  </li>
  <li>Nested ESXi Host
    <ul>
      <li>Streacom F7CWS ALPHA Black case</li>
      <li>64GB RAM</li>
      <li>2 x 250GB SATA SSD drives</li>
      <li>1 x 1TB SATA drive</li>
    </ul>
  </li>
</ul>

<p><strong>Note:</strong> The NUCs are now housed on my Lego NUC Rack. I will be writing another post with instructions on how to build a rack just like that soon (maybe!).</p>

<h3 id="dr-lab-streched-vlans-10-20-and-30">DR Lab (Streched VLANs 10, 20 and 30)</h3>

<ul>
  <li>Cisco SG200-18</li>
</ul>

<p>Still being built. I am thinking about getting an SG-500 switch to replace the SG-300-10. The DR lab would then go to the bottom of the garden. ;-)</p>

<p>At the moment, just a second NAS with the same specification as that of the mini lab. Data replicated via ZFS send/receive.</p>

<h2 id="the-chief-architect-says">The Chief Architect says:</h2>

<p><img src="/images/chief_architect.png" alt="Chief Architect" class="align-center" /></p>

<center>A reasonable effort, but could do better.</center>

        
      </section>

      <footer class="page__meta">
        
        


  




  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/tags/#education" class="page__taxonomy-item" rel="tag">Education</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#homelab" class="page__taxonomy-item" rel="tag">Homelab</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#nas" class="page__taxonomy-item" rel="tag">NAS</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#nuc" class="page__taxonomy-item" rel="tag">NUC</a><span class="sep">, </span>
    
      
      
      <a href="http://localhost:4000/tags/#virtualisation" class="page__taxonomy-item" rel="tag">Virtualisation</a>
    
    </span>
  </p>




  






  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="http://localhost:4000/categories/#homelab" class="page__taxonomy-item" rel="tag">Homelab</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-11-25T00:00:00+00:00">November 25, 2016</time></p>
        
      </footer>

      

<section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/homelab/The-Mini-Lab/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/homelab/The-Mini-Lab/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=http://localhost:4000/homelab/The-Mini-Lab/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/homelab/The-Mini-Lab/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="http://localhost:4000/homelab/USB-Ethernet-driver-for-ESXi-6.5/" class="pagination--pager" title="USB Ethernet driver for ESXi 6.5
">Previous</a>
    
    
      <a href="#" class="pagination--pager disabled">Next</a>
    
  </nav>

    </div>

    
      

<div class="page__comments">
  <h4 class="page__comments-title">Leave a Comment</h4>
  
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
        <h4 class="page__related-title">You May Also Enjoy</h4>
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  
    <a href="http://localhost:4000/homelab/USB-Ethernet-driver-for-ESXi-6.5/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "http://localhost:4000/images/usb_adapters_65.png"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">USB Ethernet driver for ESXi 6.5
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  4 minutes read
</p>
      
      <p class="archive__item-excerpt" itemprop="description">ESXi 6.5 drivers for USB 3.0 Gigabit Ethernet adapters based on the ASIX ax88179_178a or the Realtek RLT8153/RTL8152 chipsets
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://localhost:4000/homelab/Want-a-USB-Ethernet-driver-for-ESXi-You-can-have-two/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "http://localhost:4000/images/usb_adapters.png"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Want a USB Ethernet driver for ESXi? You can have two.
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  11 minutes read
</p>
      
      <p class="archive__item-excerpt" itemprop="description">ESXi drivers for USB 3.0 Gigabit Ethernet adapters based on the ASIX ax88179_178a or the Realtek RLT8153/RTL8152 chipsets
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://localhost:4000/apple/Intel_Mesh_Commander_on_Mac_OS_X/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "http://localhost:4000/images/commander.png"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Intel Mesh Commander on Mac OS X
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  5 minutes read
</p>
      
      <p class="archive__item-excerpt" itemprop="description">A Mac OS X application for the management of computers with Intel AMT (Active Management Technology), supporting redirection, remote desktop, remote terminal...</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="http://localhost:4000/homelab/NUC-Squarepants/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "http://localhost:4000/images//nuc/nuc_squarepants.png"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">NUC Squarepants
</h2>
      
        <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 


  5 minutes read
</p>
      
      <p class="archive__item-excerpt" itemprop="description">Adding a Mini PCIe Ethernet adapter to 3rd or 4th generation Intel NUC, housed on a 3D printed custom base.
</p>
    </article>
  </a>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/devttyuk"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/gomesjj"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 Jose Gomes. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://localhost:4000/assets/js/main.min.js"></script>





  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'devttyuk';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






    <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

  </body>
</html>

